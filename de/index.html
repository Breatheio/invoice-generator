<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kostenloser Rechnungsgenerator - Rechnungen erstellen & PDF herunterladen | MakeInvoice.online</title>
  <meta name="description" content="Erstellen Sie kostenlos professionelle Rechnungen. Einfacher Rechnungsgenerator mit Live-Vorschau, PDF-Download und anpassbaren Vorlagen. Keine Anmeldung erforderlich.">
  <meta name="keywords" content="kostenloser rechnungsgenerator, rechnung erstellen online, rechnung vorlage PDF, online rechnung erstellen, rechnungsvorlage">
  <link rel="canonical" href="https://www.makeinvoice.online/de/">

  <!-- Hreflang tags -->
  <link rel="alternate" hreflang="en" href="https://www.makeinvoice.online/">
  <link rel="alternate" hreflang="de" href="https://www.makeinvoice.online/de/">
  <link rel="alternate" hreflang="fr" href="https://www.makeinvoice.online/fr/">
  <link rel="alternate" hreflang="es" href="https://www.makeinvoice.online/es/">
  <link rel="alternate" hreflang="x-default" href="https://www.makeinvoice.online/">

  <!-- Open Graph / Social -->
  <meta property="og:title" content="Kostenloser Rechnungsgenerator - Rechnungen erstellen & PDF herunterladen">
  <meta property="og:description" content="Erstellen Sie kostenlos professionelle Rechnungen. Einfacher Rechnungsgenerator mit Live-Vorschau und PDF-Download.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://www.makeinvoice.online/de/">
  <meta property="og:image" content="https://www.makeinvoice.online/assets/og-image.png">
  <meta property="og:locale" content="de_DE">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Kostenloser Rechnungsgenerator - MakeInvoice.online">
  <meta name="twitter:description" content="Erstellen Sie kostenlos professionelle Rechnungen. Einfacher Rechnungsgenerator mit Live-Vorschau und PDF-Download.">

  <!-- JSON-LD Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "MakeInvoice.online",
    "url": "https://www.makeinvoice.online/de/",
    "description": "Kostenloser Online-Rechnungsgenerator mit Live-Vorschau und PDF-Download",
    "inLanguage": "de"
  }
  </script>
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "SoftwareApplication",
    "name": "MakeInvoice.online - Kostenloser Rechnungsgenerator",
    "url": "https://www.makeinvoice.online/de/",
    "applicationCategory": "BusinessApplication",
    "operatingSystem": "Web Browser",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "EUR"
    },
    "aggregateRating": {
      "@type": "AggregateRating",
      "ratingValue": "4.8",
      "ratingCount": "150"
    },
    "description": "Erstellen Sie kostenlos professionelle Rechnungen. Einfacher Rechnungsgenerator mit Live-Vorschau, PDF-Download und anpassbaren Vorlagen.",
    "inLanguage": "de"
  }
  </script>
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [
      {
        "@type": "Question",
        "name": "Ist dieser Rechnungsgenerator wirklich kostenlos?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Ja! Unser Basis-Rechnungsgenerator ist komplett kostenlos. Sie können unbegrenzt Rechnungen erstellen, Positionen hinzufügen, Steuern berechnen und PDFs herunterladen. Die kostenlose Version enthält ein kleines Wasserzeichen. Premium-Nutzer erhalten Rechnungen ohne Wasserzeichen, eigenes Logo, mehrere Währungen und mehr Vorlagen."
        }
      },
      {
        "@type": "Question",
        "name": "Muss ich ein Konto erstellen?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Keine Anmeldung erforderlich. Füllen Sie einfach das Rechnungsformular aus und laden Sie Ihr PDF sofort herunter. Ihre Daten bleiben in Ihrem Browser und werden niemals an unsere Server gesendet."
        }
      },
      {
        "@type": "Question",
        "name": "Welche Informationen sollte eine Rechnung enthalten?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Eine professionelle Rechnung sollte enthalten: Ihren Firmennamen und Kontaktdaten, Name und Adresse des Kunden, eindeutige Rechnungsnummer, Rechnungsdatum und Fälligkeitsdatum, aufgeschlüsselte Liste der Produkte oder Dienstleistungen mit Mengen und Preisen, Zwischensumme, Steuerbetrag (falls zutreffend) und Gesamtbetrag."
        }
      },
      {
        "@type": "Question",
        "name": "Kann ich mein Firmenlogo hinzufügen?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Ja! Premium-Nutzer können ihr Firmenlogo hochladen, um gebrandete, professionelle Rechnungen zu erstellen. Das Logo erscheint oben auf Ihrer Rechnung und im heruntergeladenen PDF."
        }
      },
      {
        "@type": "Question",
        "name": "Welche Währungen werden unterstützt?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Kostenlose Nutzer können Rechnungen in USD erstellen. Premium-Nutzer haben Zugang zu über 20 Währungen, darunter EUR, GBP, CHF, CAD, AUD, JPY und viele mehr."
        }
      },
      {
        "@type": "Question",
        "name": "Sind meine Rechnungsdaten sicher?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Ja. Alle Ihre Rechnungsdaten werden lokal in Ihrem Browser gespeichert. Ihre Geschäftsinformationen, Kundendaten und Rechnungsinhalte verlassen niemals Ihr Gerät, es sei denn, Sie laden das PDF herunter oder teilen es."
        }
      }
    ]
  }
  </script>

  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="../assets/logo.svg">

  <!-- Performance: Preconnect to CDN domains -->
  <link rel="preconnect" href="https://cdn.tailwindcss.com">
  <link rel="preconnect" href="https://cdn.jsdelivr.net">
  <link rel="preconnect" href="https://cdnjs.cloudflare.com">

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: {
              50: '#eff6ff',
              100: '#dbeafe',
              200: '#bfdbfe',
              300: '#93c5fd',
              400: '#60a5fa',
              500: '#3b82f6',
              600: '#2563eb',
              700: '#1d4ed8',
              800: '#1e40af',
              900: '#1e3a8a',
            }
          }
        }
      }
    }
  </script>

  <!-- Custom Styles -->
  <link rel="stylesheet" href="../styles/custom.css">

  <!-- Alpine.js + Collapse plugin -->
  <script defer src="https://cdn.jsdelivr.net/npm/@alpinejs/collapse@3.x.x/dist/cdn.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>

  <!-- jsPDF -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <!-- html2canvas -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

  <!-- Paddle.js -->
  <script src="https://cdn.paddle.com/paddle/v2/paddle.js"></script>

  <!-- Google Analytics 4 -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-24Y37R31VJ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-24Y37R31VJ');
  </script>

  <!-- Vercel Analytics -->
  <script defer src="/_vercel/insights/script.js"></script>
  <script defer src="/_vercel/speed-insights/script.js"></script>

  <!-- App Scripts -->
  <script src="../js/currencies.js"></script>
  <script src="../js/storage.js"></script>
  <script src="../js/paddle-handler.js"></script>
  <script src="../js/pdf-generator.js"></script>
  <script src="../js/app.js"></script>
</head>
<body class="bg-gray-50 min-h-screen" x-data="invoiceApp()" x-init="init()">
  <!-- Header -->
  <header class="bg-white shadow-sm border-b border-gray-200">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between items-center h-16">
        <!-- Logo -->
        <div class="flex items-center space-x-3">
          <svg class="w-8 h-8 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
          </svg>
          <span class="text-xl font-bold text-gray-900">MakeInvoice<span class="text-blue-600">.online</span></span>
        </div>

        <!-- Language Switcher & Navigation -->
        <div class="flex items-center space-x-2 sm:space-x-4">
          <div class="relative" x-data="{ open: false }">
            <button @click="open = !open" class="flex items-center text-gray-600 hover:text-blue-600 font-medium text-sm">
              DE
              <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
              </svg>
            </button>
            <div x-show="open" @click.away="open = false" class="absolute right-0 mt-2 w-24 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50">
              <a href="../" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">English</a>
              <a href="../de/" class="block px-4 py-2 text-sm text-blue-600 bg-blue-50">Deutsch</a>
              <a href="../fr/" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Français</a>
              <a href="../es/" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Español</a>
            </div>
          </div>
          <a href="../blog/" class="text-gray-600 hover:text-blue-600 font-medium hidden sm:inline">Blog</a>
          <button @click="newInvoice()" class="btn-secondary text-sm py-2 flex items-center">
            <svg class="w-4 h-4 sm:mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
            </svg>
            <span class="hidden sm:inline">Neue Rechnung</span>
          </button>
          <button @click="openHistory()" class="btn-secondary text-sm py-2 flex items-center">
            <svg class="w-4 h-4 sm:mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
            <span class="hidden sm:inline">Verlauf</span>
            <span x-show="invoiceHistory.length > 0" class="ml-1 bg-blue-100 text-blue-600 text-xs px-1.5 py-0.5 rounded-full" x-text="invoiceHistory.length"></span>
          </button>
          <template x-if="isPremium">
            <div class="flex items-center space-x-2">
              <span class="premium-badge">
                <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                  <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>
                </svg>
                Premium
              </span>
              <button @click="cancelSubscription()" class="text-sm text-gray-500 hover:text-gray-700">
                Verwalten
              </button>
            </div>
          </template>
          <template x-if="!isPremium">
            <button @click="showPricingModal = true" class="btn-premium text-sm py-2">
              Auf Premium upgraden
            </button>
          </template>
        </div>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <!-- Mobile Tab Switcher -->
    <div class="lg:hidden flex bg-white rounded-lg shadow mb-6 p-1">
      <button
        @click="activeTab = 'form'"
        :class="activeTab === 'form' ? 'bg-blue-600 text-white' : 'text-gray-600'"
        class="flex-1 py-2 px-4 rounded-md font-medium transition-colors"
      >
        Rechnung bearbeiten
      </button>
      <button
        @click="activeTab = 'preview'"
        :class="activeTab === 'preview' ? 'bg-blue-600 text-white' : 'text-gray-600'"
        class="flex-1 py-2 px-4 rounded-md font-medium transition-colors"
      >
        Vorschau
      </button>
    </div>

    <div class="grid lg:grid-cols-2 gap-8">
      <!-- Left Column: Form -->
      <div :class="{ 'hidden lg:block': activeTab === 'preview' }">
        <div class="bg-white rounded-xl shadow-lg p-6 space-y-6">
          <!-- Business Info Section -->
          <section>
            <div class="flex justify-between items-center mb-4">
              <h2 class="text-lg font-semibold text-gray-900">Ihr Unternehmen</h2>
              <div class="flex gap-2">
                <button type="button" @click="saveBusinessInfo()" class="text-xs text-blue-600 hover:text-blue-700 font-medium flex items-center gap-1" title="Speichern Sie Ihre Firmendaten für zukünftige Rechnungen">
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"></path>
                  </svg>
                  Profil speichern
                </button>
                <span x-show="hasBusinessProfile" class="text-xs text-green-600 flex items-center gap-1">
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                  </svg>
                  Gespeichert
                </span>
              </div>
            </div>

            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
              <div class="sm:col-span-2">
                <label class="form-label">Firmenname *</label>
                <input type="text" x-model="business.name" class="form-input" placeholder="Ihr Firmenname">
              </div>
              <div>
                <label class="form-label">E-Mail</label>
                <input type="email" x-model="business.email" class="form-input" placeholder="email@firma.de">
              </div>
              <div>
                <label class="form-label">Telefon</label>
                <input type="tel" x-model="business.phone" class="form-input" placeholder="+49 (0) 123 456789">
              </div>
              <div class="sm:col-span-2">
                <label class="form-label">Adresse</label>
                <textarea x-model="business.address" class="form-input" rows="2" placeholder="Musterstraße 123, 12345 Berlin"></textarea>
              </div>

              <!-- Logo Upload (Premium) -->
              <div class="sm:col-span-2">
                <label class="form-label">
                  Logo
                  <span x-show="!isPremium" class="text-purple-600 text-xs ml-1">(Premium)</span>
                </label>
                <div class="logo-upload" :class="{ 'has-logo': business.logo }">
                  <template x-if="business.logo">
                    <div class="relative">
                      <img :src="business.logo" alt="Logo" class="logo-preview">
                      <button @click="removeLogo()" class="absolute top-0 right-0 p-1 bg-red-500 text-white rounded-full text-xs">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                      </button>
                    </div>
                  </template>
                  <template x-if="!business.logo">
                    <label class="cursor-pointer">
                      <svg class="w-10 h-10 mx-auto text-gray-400 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                      </svg>
                      <span class="text-sm text-gray-500">Klicken zum Hochladen (max. 500KB)</span>
                      <input type="file" accept="image/*" @change="handleLogoUpload($event)" class="hidden">
                    </label>
                  </template>
                </div>
              </div>
            </div>
          </section>

          <!-- Client Info Section -->
          <section>
            <div class="flex justify-between items-center mb-4">
              <h2 class="text-lg font-semibold text-gray-900">Rechnungsempfänger</h2>
              <div class="flex gap-2">
                <button type="button" @click="saveCurrentClient()" class="text-xs text-blue-600 hover:text-blue-700 font-medium flex items-center gap-1" title="Kunden für zukünftige Verwendung speichern">
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"></path>
                  </svg>
                  Kunde speichern
                </button>
                <button type="button" @click="openClientManager()" class="text-xs text-gray-500 hover:text-gray-700 font-medium flex items-center gap-1" title="Gespeicherte Kunden verwalten">
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"></path>
                  </svg>
                  Verwalten
                </button>
              </div>
            </div>
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
              <div class="sm:col-span-2 relative">
                <label class="form-label">Kundenname *</label>
                <input
                  type="text"
                  x-model="client.name"
                  @input="onClientNameInput($event)"
                  @focus="onClientNameFocus()"
                  @blur="onClientNameBlur()"
                  @keydown="onClientNameKeydown($event)"
                  class="form-input"
                  placeholder="Tippen Sie, um gespeicherte Kunden zu suchen..."
                  autocomplete="off"
                >
                <!-- Client Autocomplete Dropdown -->
                <div
                  x-show="showClientSuggestions"
                  x-cloak
                  class="absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto"
                >
                  <template x-for="(suggestion, index) in clientSuggestions" :key="suggestion.id">
                    <button
                      type="button"
                      @click="selectClient(suggestion)"
                      class="w-full px-4 py-3 text-left hover:bg-blue-50 flex items-center justify-between border-b border-gray-100 last:border-b-0 transition-colors"
                      :class="{ 'bg-blue-50': selectedSuggestionIndex === index }"
                    >
                      <div>
                        <div class="font-medium text-gray-900" x-text="suggestion.name"></div>
                        <div class="text-sm text-gray-500" x-text="suggestion.email || 'Keine E-Mail'"></div>
                      </div>
                      <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                      </svg>
                    </button>
                  </template>
                </div>
              </div>
              <div>
                <label class="form-label">Kunden-E-Mail</label>
                <input type="email" x-model="client.email" class="form-input" placeholder="kunde@email.de">
              </div>
              <div class="sm:col-span-2">
                <label class="form-label">Kundenadresse</label>
                <textarea x-model="client.address" class="form-input" rows="2" placeholder="Adresse des Kunden"></textarea>
              </div>
            </div>
          </section>

          <!-- Invoice Details Section -->
          <section>
            <h2 class="text-lg font-semibold text-gray-900 mb-4">Rechnungsdetails</h2>
            <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
              <div>
                <label class="form-label">Rechnungsnummer *</label>
                <input type="text" x-model="invoice.number" class="form-input" placeholder="RE-001">
              </div>
              <div>
                <label class="form-label">Rechnungsdatum</label>
                <input type="date" x-model="invoice.date" class="form-input">
              </div>
              <div>
                <label class="form-label">Fälligkeitsdatum</label>
                <input type="date" x-model="invoice.dueDate" class="form-input">
              </div>
            </div>
          </section>

          <!-- Currency & Tax Section -->
          <section>
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
              <div>
                <label class="form-label">
                  Währung
                  <span x-show="!isPremium" class="text-purple-600 text-xs ml-1">(Mehr mit Premium)</span>
                </label>
                <select x-model="currency" @change="onCurrencyChange()" class="currency-selector">
                  <template x-if="!isPremium">
                    <option value="USD">USD ($) - US-Dollar</option>
                  </template>
                  <template x-if="isPremium">
                    <template x-for="curr in CURRENCIES" :key="curr.code">
                      <option :value="curr.code" x-text="`${curr.code} (${curr.symbol}) - ${curr.name}`"></option>
                    </template>
                  </template>
                </select>
              </div>
              <div>
                <label class="form-label">Steuersatz (%)</label>
                <input type="number" x-model="taxRate" min="0" max="100" step="0.1" class="form-input" placeholder="19">
              </div>
            </div>

            <!-- Discount Section -->
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mt-4">
              <div>
                <label class="form-label">Rabattart</label>
                <select x-model="discount.type" class="form-input">
                  <option value="percentage">Prozent (%)</option>
                  <option value="fixed">Festbetrag</option>
                </select>
              </div>
              <div>
                <label class="form-label">Rabatt <span x-text="discount.type === 'percentage' ? '(%)' : '(' + getCurrencySymbol() + ')'"></span></label>
                <input type="number" x-model="discount.value" min="0" step="0.01" class="form-input" placeholder="0">
              </div>
            </div>
          </section>

          <!-- Line Items Section -->
          <section>
            <h2 class="text-lg font-semibold text-gray-900 mb-4">Positionen</h2>
            <div class="overflow-x-auto">
              <table class="line-items-table">
                <thead>
                  <tr>
                    <th class="w-1/2">Beschreibung</th>
                    <th class="w-20 text-center">Menge</th>
                    <th class="w-28 text-right">Preis</th>
                    <th class="w-28 text-right">Betrag</th>
                    <th class="w-10"></th>
                  </tr>
                </thead>
                <tbody>
                  <template x-for="(item, index) in items" :key="index">
                    <tr>
                      <td class="pr-2">
                        <input type="text" x-model="item.description" class="form-input text-sm" placeholder="Artikelbeschreibung">
                      </td>
                      <td class="px-2">
                        <input type="number" x-model="item.quantity" min="1" class="form-input text-sm text-center" placeholder="1">
                      </td>
                      <td class="px-2">
                        <input type="number" x-model="item.price" min="0" step="0.01" class="form-input text-sm text-right" placeholder="0,00">
                      </td>
                      <td class="pl-2 text-right text-gray-700 font-medium" x-text="formatCurrency(item.quantity * item.price)"></td>
                      <td class="pl-2">
                        <button @click="removeItem(index)" class="btn-danger" :disabled="items.length === 1">
                          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                          </svg>
                        </button>
                      </td>
                    </tr>
                  </template>
                </tbody>
              </table>
            </div>
            <button @click="addItem()" class="btn-secondary mt-4 w-full sm:w-auto">
              <svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
              </svg>
              Position hinzufügen
            </button>
          </section>

          <!-- Notes Section -->
          <section>
            <label class="form-label">Notizen / Zahlungsbedingungen</label>
            <textarea x-model="invoice.notes" class="form-input" rows="3" placeholder="Zahlungsbedingungen, Bankverbindung, Dankesnachricht..."></textarea>
          </section>

          <!-- Template Selection (Premium) -->
          <section>
            <h2 class="text-lg font-semibold text-gray-900 mb-4">
              Vorlage
              <span x-show="!isPremium" class="text-purple-600 text-xs ml-1">(Premium)</span>
            </h2>
            <div class="grid grid-cols-3 gap-4">
              <button @click="onTemplateChange('classic')" :class="{ 'selected': template === 'classic' }" class="template-option">
                <div class="h-16 bg-gray-100 rounded mb-2 flex items-center justify-center">
                  <span class="text-xs text-gray-500">Klassisch</span>
                </div>
              </button>
              <button @click="onTemplateChange('modern')" :class="{ 'selected': template === 'modern' }" class="template-option relative">
                <div class="h-16 bg-blue-100 rounded mb-2 flex items-center justify-center">
                  <span class="text-xs text-blue-600">Modern</span>
                </div>
                <span x-show="!isPremium" class="absolute top-1 right-1 text-xs text-purple-600">PRO</span>
              </button>
              <button @click="onTemplateChange('minimal')" :class="{ 'selected': template === 'minimal' }" class="template-option relative">
                <div class="h-16 bg-gray-50 border rounded mb-2 flex items-center justify-center">
                  <span class="text-xs text-gray-500">Minimal</span>
                </div>
                <span x-show="!isPremium" class="absolute top-1 right-1 text-xs text-purple-600">PRO</span>
              </button>
            </div>
          </section>

          <!-- Download & Print Buttons -->
          <div class="pt-4 border-t border-gray-200">
            <div class="flex gap-3">
              <button
                @click="downloadPDF()"
                :disabled="isGeneratingPDF"
                class="btn-primary flex-1 flex items-center justify-center"
              >
                <template x-if="isGeneratingPDF">
                  <span class="flex items-center">
                    <span class="spinner mr-2"></span>
                    Wird erstellt...
                  </span>
                </template>
                <template x-if="!isGeneratingPDF">
                  <span class="flex items-center">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path>
                    </svg>
                    PDF herunterladen
                  </span>
                </template>
              </button>
              <button
                @click="printInvoice()"
                class="btn-secondary flex items-center justify-center px-4"
                title="Rechnung drucken"
              >
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"></path>
                </svg>
              </button>
              <button
                @click="saveToHistory()"
                class="btn-secondary flex items-center justify-center px-4"
                title="Im Verlauf speichern"
              >
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"></path>
                </svg>
              </button>
            </div>
            <p x-show="!isPremium" class="text-xs text-gray-500 text-center mt-2">
              Kostenlose Version enthält Wasserzeichen.
              <button @click="showPricingModal = true" class="text-purple-600 hover:underline">Upgraden für Rechnungen ohne Wasserzeichen</button>
            </p>
          </div>
        </div>

      </div>

      <!-- Right Column: Preview -->
      <div :class="{ 'hidden lg:block': activeTab === 'form' }" class="lg:sticky lg:top-8 lg:self-start">
        <h2 class="text-lg font-semibold text-gray-900 mb-4 hidden lg:block">Live-Vorschau</h2>

        <!-- Invoice Preview -->
        <div id="invoice-preview" class="invoice-preview rounded-lg p-8" :class="getTemplateClass()">
          <!-- Header -->
          <div class="invoice-header" :class="{ 'flex justify-between items-start': template !== 'modern' }">
            <div :class="{ 'text-white': template === 'modern' }">
              <!-- Logo -->
              <template x-if="business.logo">
                <img :src="business.logo" alt="Firmenlogo" class="h-16 object-contain mb-4">
              </template>
              <h1 class="text-2xl font-bold" :class="template === 'modern' ? 'text-white' : 'text-gray-900'" x-text="business.name || 'Ihr Firmenname'"></h1>
              <p class="text-sm mt-1" :class="template === 'modern' ? 'text-blue-100' : 'text-gray-600'" x-text="business.email"></p>
              <p class="text-sm" :class="template === 'modern' ? 'text-blue-100' : 'text-gray-600'" x-text="business.phone"></p>
              <p class="text-sm whitespace-pre-line" :class="template === 'modern' ? 'text-blue-100' : 'text-gray-600'" x-text="business.address"></p>
            </div>
            <div class="text-right" :class="{ 'mt-4': template === 'modern' }">
              <h2 class="text-3xl font-bold" :class="template === 'modern' ? 'text-white' : 'text-gray-400'">RECHNUNG</h2>
              <p class="text-sm mt-2" :class="template === 'modern' ? 'text-blue-100' : 'text-gray-600'">
                <span class="font-medium">Nr.</span> <span x-text="invoice.number || 'RE-001'"></span>
              </p>
              <p class="text-sm" :class="template === 'modern' ? 'text-blue-100' : 'text-gray-600'">
                <span class="font-medium">Datum:</span> <span x-text="invoice.date"></span>
              </p>
              <p class="text-sm" :class="template === 'modern' ? 'text-blue-100' : 'text-gray-600'">
                <span class="font-medium">Fällig:</span> <span x-text="invoice.dueDate"></span>
              </p>
            </div>
          </div>

          <!-- Bill To -->
          <div class="mt-8 mb-8">
            <h3 class="text-sm font-semibold text-gray-500 uppercase tracking-wider mb-2">Rechnungsempfänger</h3>
            <p class="font-semibold text-gray-900" x-text="client.name || 'Kundenname'"></p>
            <p class="text-sm text-gray-600" x-text="client.email"></p>
            <p class="text-sm text-gray-600 whitespace-pre-line" x-text="client.address"></p>
          </div>

          <!-- Items Table -->
          <table class="w-full mb-8">
            <thead>
              <tr class="border-b-2 border-gray-200">
                <th class="text-left text-sm font-semibold text-gray-600 py-2">Beschreibung</th>
                <th class="text-center text-sm font-semibold text-gray-600 py-2 w-20">Menge</th>
                <th class="text-right text-sm font-semibold text-gray-600 py-2 w-28">Preis</th>
                <th class="text-right text-sm font-semibold text-gray-600 py-2 w-28">Betrag</th>
              </tr>
            </thead>
            <tbody>
              <template x-for="(item, index) in items" :key="index">
                <tr class="border-b border-gray-100">
                  <td class="py-3 text-gray-800" x-text="item.description || 'Artikelbeschreibung'"></td>
                  <td class="py-3 text-center text-gray-600" x-text="item.quantity"></td>
                  <td class="py-3 text-right text-gray-600" x-text="formatCurrency(item.price)"></td>
                  <td class="py-3 text-right font-medium text-gray-800" x-text="formatCurrency(item.quantity * item.price)"></td>
                </tr>
              </template>
            </tbody>
          </table>

          <!-- Totals -->
          <div class="flex justify-end">
            <div class="w-64">
              <div class="flex justify-between py-2">
                <span class="text-gray-600">Zwischensumme</span>
                <span class="font-medium text-gray-800" x-text="formatCurrency(subtotal)"></span>
              </div>
              <div class="flex justify-between py-2 text-green-600" x-show="discountAmount > 0">
                <span>Rabatt <span x-show="discount.type === 'percentage'">(<span x-text="discount.value"></span>%)</span></span>
                <span class="font-medium">-<span x-text="formatCurrency(discountAmount)"></span></span>
              </div>
              <div class="flex justify-between py-2" x-show="taxRate > 0">
                <span class="text-gray-600">MwSt. (<span x-text="taxRate"></span>%)</span>
                <span class="font-medium text-gray-800" x-text="formatCurrency(taxAmount)"></span>
              </div>
              <div class="flex justify-between py-3 border-t-2 border-gray-800">
                <span class="text-lg font-bold text-gray-900">Gesamtbetrag</span>
                <span class="text-lg font-bold text-gray-900" x-text="formatCurrency(total)"></span>
              </div>
            </div>
          </div>

          <!-- Notes -->
          <div x-show="invoice.notes" class="mt-8 pt-6 border-t border-gray-200">
            <h3 class="text-sm font-semibold text-gray-500 uppercase tracking-wider mb-2">Notizen</h3>
            <p class="text-sm text-gray-600 whitespace-pre-line" x-text="invoice.notes"></p>
          </div>

          <!-- Watermark (Free users) -->
          <div x-show="!isPremium" class="mt-8 pt-4 text-center">
            <p class="text-xs text-gray-400">Erstellt mit MakeInvoice.online</p>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- FAQ Section -->
  <section class="bg-gray-50 py-16" x-data="{ openFaq: null }">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12">
        <h2 class="text-3xl font-bold text-gray-900 mb-4">Häufig gestellte Fragen</h2>
        <p class="text-gray-600">Alles, was Sie über die Rechnungserstellung wissen müssen</p>
      </div>

      <div class="space-y-4">
        <!-- FAQ 1 -->
        <div class="bg-white rounded-lg shadow-sm border border-gray-200">
          <button @click="openFaq = openFaq === 1 ? null : 1" class="w-full px-6 py-4 text-left flex justify-between items-center">
            <span class="font-semibold text-gray-900">Ist dieser Rechnungsgenerator wirklich kostenlos?</span>
            <svg class="w-5 h-5 text-gray-500 transition-transform" :class="{ 'rotate-180': openFaq === 1 }" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
            </svg>
          </button>
          <div x-show="openFaq === 1" x-collapse class="px-6 pb-4">
            <p class="text-gray-600">Ja! Unser Basis-Rechnungsgenerator ist komplett kostenlos. Sie können unbegrenzt Rechnungen erstellen, Positionen hinzufügen, Steuern berechnen und PDFs herunterladen. Die kostenlose Version enthält ein kleines Wasserzeichen. Premium-Nutzer erhalten Rechnungen ohne Wasserzeichen, eigenes Logo, mehrere Währungen und mehr Vorlagen.</p>
          </div>
        </div>

        <!-- FAQ 2 -->
        <div class="bg-white rounded-lg shadow-sm border border-gray-200">
          <button @click="openFaq = openFaq === 2 ? null : 2" class="w-full px-6 py-4 text-left flex justify-between items-center">
            <span class="font-semibold text-gray-900">Muss ich ein Konto erstellen?</span>
            <svg class="w-5 h-5 text-gray-500 transition-transform" :class="{ 'rotate-180': openFaq === 2 }" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
            </svg>
          </button>
          <div x-show="openFaq === 2" x-collapse class="px-6 pb-4">
            <p class="text-gray-600">Keine Anmeldung erforderlich. Füllen Sie einfach das Rechnungsformular aus und laden Sie Ihr PDF sofort herunter. Ihre Daten bleiben in Ihrem Browser und werden niemals an unsere Server gesendet.</p>
          </div>
        </div>

        <!-- FAQ 3 -->
        <div class="bg-white rounded-lg shadow-sm border border-gray-200">
          <button @click="openFaq = openFaq === 3 ? null : 3" class="w-full px-6 py-4 text-left flex justify-between items-center">
            <span class="font-semibold text-gray-900">Welche Informationen sollte eine Rechnung enthalten?</span>
            <svg class="w-5 h-5 text-gray-500 transition-transform" :class="{ 'rotate-180': openFaq === 3 }" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
            </svg>
          </button>
          <div x-show="openFaq === 3" x-collapse class="px-6 pb-4">
            <p class="text-gray-600">Eine professionelle Rechnung sollte enthalten: Ihren Firmennamen und Kontaktdaten, Name und Adresse des Kunden, eindeutige Rechnungsnummer, Rechnungsdatum und Fälligkeitsdatum, aufgeschlüsselte Liste der Produkte oder Dienstleistungen mit Mengen und Preisen, Zwischensumme, Steuerbetrag (falls zutreffend) und Gesamtbetrag. Optional können Sie auch Zahlungsbedingungen und akzeptierte Zahlungsmethoden angeben.</p>
          </div>
        </div>

        <!-- FAQ 4 -->
        <div class="bg-white rounded-lg shadow-sm border border-gray-200">
          <button @click="openFaq = openFaq === 4 ? null : 4" class="w-full px-6 py-4 text-left flex justify-between items-center">
            <span class="font-semibold text-gray-900">Kann ich mein Firmenlogo hinzufügen?</span>
            <svg class="w-5 h-5 text-gray-500 transition-transform" :class="{ 'rotate-180': openFaq === 4 }" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
            </svg>
          </button>
          <div x-show="openFaq === 4" x-collapse class="px-6 pb-4">
            <p class="text-gray-600">Ja! Premium-Nutzer können ihr Firmenlogo hochladen, um gebrandete, professionelle Rechnungen zu erstellen. Das Logo erscheint oben auf Ihrer Rechnung und im heruntergeladenen PDF.</p>
          </div>
        </div>

        <!-- FAQ 5 -->
        <div class="bg-white rounded-lg shadow-sm border border-gray-200">
          <button @click="openFaq = openFaq === 5 ? null : 5" class="w-full px-6 py-4 text-left flex justify-between items-center">
            <span class="font-semibold text-gray-900">Welche Währungen werden unterstützt?</span>
            <svg class="w-5 h-5 text-gray-500 transition-transform" :class="{ 'rotate-180': openFaq === 5 }" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
            </svg>
          </button>
          <div x-show="openFaq === 5" x-collapse class="px-6 pb-4">
            <p class="text-gray-600">Kostenlose Nutzer können Rechnungen in USD erstellen. Premium-Nutzer haben Zugang zu über 20 Währungen, darunter EUR, GBP, CHF, CAD, AUD, JPY und viele mehr.</p>
          </div>
        </div>

        <!-- FAQ 6 -->
        <div class="bg-white rounded-lg shadow-sm border border-gray-200">
          <button @click="openFaq = openFaq === 6 ? null : 6" class="w-full px-6 py-4 text-left flex justify-between items-center">
            <span class="font-semibold text-gray-900">Sind meine Rechnungsdaten sicher?</span>
            <svg class="w-5 h-5 text-gray-500 transition-transform" :class="{ 'rotate-180': openFaq === 6 }" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
            </svg>
          </button>
          <div x-show="openFaq === 6" x-collapse class="px-6 pb-4">
            <p class="text-gray-600">Ja. Alle Ihre Rechnungsdaten werden lokal in Ihrem Browser gespeichert. Ihre Geschäftsinformationen, Kundendaten und Rechnungsinhalte verlassen niemals Ihr Gerät, es sei denn, Sie laden das PDF herunter oder teilen es.</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="bg-white border-t border-gray-200 mt-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        <div>
          <div class="flex items-center space-x-2 mb-4">
            <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
            </svg>
            <span class="font-bold text-gray-900">MakeInvoice.online</span>
          </div>
          <p class="text-sm text-gray-600">Erstellen Sie kostenlos professionelle Rechnungen. Einfacher Rechnungsgenerator mit Live-Vorschau und PDF-Download.</p>
        </div>
        <div>
          <h3 class="font-semibold text-gray-900 mb-4">Schnelllinks</h3>
          <ul class="space-y-2 text-sm">
            <li><a href="../" class="text-gray-600 hover:text-blue-600">Startseite</a></li>
            <li><a href="../blog/" class="text-gray-600 hover:text-blue-600">Blog</a></li>
            <li><a href="../about" class="text-gray-600 hover:text-blue-600">Über uns</a></li>
            <li><a href="../how-it-works" class="text-gray-600 hover:text-blue-600">So funktioniert's</a></li>
            <li><a href="../contact" class="text-gray-600 hover:text-blue-600">Kontakt</a></li>
          </ul>
        </div>
        <div>
          <h3 class="font-semibold text-gray-900 mb-4">Rechtliches</h3>
          <ul class="space-y-2 text-sm">
            <li><a href="#" @click.prevent="showPricingModal = true" class="text-gray-600 hover:text-blue-600">Preise</a></li>
            <li><a href="../legal/privacy" class="text-gray-600 hover:text-blue-600">Datenschutz</a></li>
            <li><a href="../legal/terms" class="text-gray-600 hover:text-blue-600">Nutzungsbedingungen</a></li>
          </ul>
        </div>
      </div>
      <div class="border-t border-gray-200 mt-8 pt-8 text-center text-sm text-gray-500">
        <p>&copy; <span x-text="new Date().getFullYear()"></span> MakeInvoice.online. Alle Rechte vorbehalten.</p>
      </div>
    </div>
  </footer>

  <!-- Pricing Modal -->
  <div x-show="showPricingModal" x-cloak class="fixed inset-0 z-50 overflow-y-auto" aria-modal="true">
    <div class="flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:p-0">
      <div x-show="showPricingModal" x-transition:enter="ease-out duration-300" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="ease-in duration-200" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity" @click="showPricingModal = false"></div>

      <div x-show="showPricingModal" x-transition:enter="ease-out duration-300" x-transition:enter-start="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95" x-transition:enter-end="opacity-100 translate-y-0 sm:scale-100" x-transition:leave="ease-in duration-200" x-transition:leave-start="opacity-100 translate-y-0 sm:scale-100" x-transition:leave-end="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95" class="relative bg-white rounded-2xl overflow-hidden shadow-xl transform transition-all sm:max-w-3xl sm:w-full">
        <button @click="showPricingModal = false" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600 z-10">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>

        <div class="p-8">
          <h2 class="text-2xl font-bold text-gray-900 text-center mb-2">Auf Premium upgraden</h2>
          <p class="text-gray-600 text-center mb-8">Alle Funktionen freischalten und professionelle Rechnungen ohne Wasserzeichen erstellen</p>

          <div class="grid md:grid-cols-2 gap-6">
            <!-- Monthly Plan -->
            <div class="pricing-card">
              <h3 class="text-lg font-semibold text-gray-900 mb-2">Monatlich</h3>
              <div class="mb-4">
                <span class="text-4xl font-bold text-gray-900">7€</span>
                <span class="text-gray-500">/Monat</span>
              </div>
              <ul class="space-y-3 mb-6 text-sm text-gray-600">
                <li class="flex items-center">
                  <svg class="w-5 h-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                  Kein Wasserzeichen
                </li>
                <li class="flex items-center">
                  <svg class="w-5 h-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                  Firmendaten speichern
                </li>
                <li class="flex items-center">
                  <svg class="w-5 h-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                  Eigenes Logo hochladen
                </li>
                <li class="flex items-center">
                  <svg class="w-5 h-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                  20+ Währungen
                </li>
                <li class="flex items-center">
                  <svg class="w-5 h-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                  Premium-Vorlagen
                </li>
                <li class="flex items-center">
                  <svg class="w-5 h-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                  Keine Werbung
                </li>
              </ul>
              <button @click="openCheckout('monthly')" class="w-full btn-secondary">
                Monatlich abonnieren
              </button>
            </div>

            <!-- Yearly Plan -->
            <div class="pricing-card recommended">
              <h3 class="text-lg font-semibold text-gray-900 mb-2">Jährlich</h3>
              <div class="mb-4">
                <span class="text-4xl font-bold text-gray-900">49€</span>
                <span class="text-gray-500">/Jahr</span>
                <span class="ml-2 inline-block px-2 py-1 bg-green-100 text-green-700 text-xs font-semibold rounded">40% sparen</span>
              </div>
              <ul class="space-y-3 mb-6 text-sm text-gray-600">
                <li class="flex items-center">
                  <svg class="w-5 h-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                  Alles aus Monatlich
                </li>
                <li class="flex items-center">
                  <svg class="w-5 h-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                  Prioritäts-Support
                </li>
                <li class="flex items-center">
                  <svg class="w-5 h-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                  Bester Wert - 35€/Jahr sparen
                </li>
              </ul>
              <button @click="openCheckout('yearly')" class="w-full btn-premium">
                Jährlich abonnieren
              </button>
            </div>
          </div>

          <p class="text-xs text-gray-500 text-center mt-6">
            Sichere Zahlung über Paddle. Jederzeit kündbar.
          </p>
        </div>
      </div>
    </div>
  </div>

  <!-- Success Modal -->
  <div x-show="showSuccessModal" x-cloak class="fixed inset-0 z-50 overflow-y-auto" aria-modal="true">
    <div class="flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:p-0">
      <div x-show="showSuccessModal" x-transition:enter="ease-out duration-300" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="ease-in duration-200" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity" @click="showSuccessModal = false"></div>

      <div x-show="showSuccessModal" x-transition:enter="ease-out duration-300" x-transition:enter-start="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95" x-transition:enter-end="opacity-100 translate-y-0 sm:scale-100" x-transition:leave="ease-in duration-200" x-transition:leave-start="opacity-100 translate-y-0 sm:scale-100" x-transition:leave-end="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95" class="relative bg-white rounded-2xl overflow-hidden shadow-xl transform transition-all sm:max-w-md sm:w-full">
        <button @click="showSuccessModal = false" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600 z-10">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>

        <div class="p-6">
          <div class="mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 mb-4">
            <svg class="h-8 w-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
            </svg>
          </div>

          <h3 class="text-xl font-bold text-gray-900 mb-2">Rechnung heruntergeladen!</h3>
          <p class="text-gray-600 mb-6">Ihre Rechnung wurde auf Ihrem Gerät gespeichert.</p>

          <div class="flex gap-3">
            <button @click="showSuccessModal = false; newInvoice()" class="flex-1 btn-secondary">
              Neue Rechnung erstellen
            </button>
            <button @click="showSuccessModal = false" class="flex-1 btn-primary">
              Fertig
            </button>
          </div>

          <p class="text-xs text-gray-500 mt-4">
            <button @click="showSuccessModal = false; showPricingModal = true" class="text-purple-600 hover:underline">Auf Premium upgraden</button>
            für werbefreies Erlebnis & ohne Wasserzeichen
          </p>
        </div>
      </div>
    </div>
  </div>

  <!-- History Modal -->
  <div x-show="showHistoryModal" x-cloak class="fixed inset-0 z-50 overflow-y-auto" aria-modal="true">
    <div class="flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:p-0">
      <div x-show="showHistoryModal" x-transition:enter="ease-out duration-300" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="ease-in duration-200" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity" @click="showHistoryModal = false"></div>

      <div x-show="showHistoryModal" x-transition:enter="ease-out duration-300" x-transition:enter-start="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95" x-transition:enter-end="opacity-100 translate-y-0 sm:scale-100" x-transition:leave="ease-in duration-200" x-transition:leave-start="opacity-100 translate-y-0 sm:scale-100" x-transition:leave-end="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95" class="relative bg-white rounded-2xl overflow-hidden shadow-xl transform transition-all sm:max-w-2xl sm:w-full max-h-[80vh] flex flex-col">
        <div class="px-6 py-4 border-b border-gray-200 flex justify-between items-center">
          <h2 class="text-xl font-bold text-gray-900">Rechnungsverlauf</h2>
          <button @click="showHistoryModal = false" class="text-gray-400 hover:text-gray-600">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
            </svg>
          </button>
        </div>

        <div class="flex-1 overflow-y-auto p-6">
          <div x-show="invoiceHistory.length === 0" class="text-center py-12">
            <svg class="w-16 h-16 mx-auto text-gray-300 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
            </svg>
            <p class="text-gray-500 mb-2">Noch keine Rechnungen gespeichert</p>
            <p class="text-sm text-gray-400">Klicken Sie auf das Lesezeichen-Symbol, um eine Rechnung hier zu speichern</p>
          </div>

          <div x-show="invoiceHistory.length > 0" class="space-y-3">
            <template x-for="item in invoiceHistory" :key="item.id">
              <div class="border border-gray-200 rounded-lg p-4 hover:border-blue-300 transition-colors">
                <div class="flex justify-between items-start">
                  <div class="flex-1">
                    <div class="flex items-center gap-2 mb-1">
                      <span class="font-semibold text-gray-900" x-text="item.invoiceNumber"></span>
                      <span class="text-xs text-gray-400" x-text="formatHistoryDate(item.savedAt)"></span>
                    </div>
                    <p class="text-gray-600" x-text="item.clientName"></p>
                    <p class="text-lg font-bold text-gray-900 mt-1" x-text="formatCurrency(item.total)"></p>
                  </div>
                  <div class="flex gap-2">
                    <button @click="duplicateFromHistory(item.id)" class="p-2 text-green-600 hover:bg-green-50 rounded-lg" title="Rechnung duplizieren">
                      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                      </svg>
                    </button>
                    <button @click="loadFromHistory(item.id)" class="p-2 text-blue-600 hover:bg-blue-50 rounded-lg" title="Rechnung laden">
                      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"></path>
                      </svg>
                    </button>
                    <button @click="deleteFromHistory(item.id)" class="p-2 text-red-600 hover:bg-red-50 rounded-lg" title="Löschen">
                      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                      </svg>
                    </button>
                  </div>
                </div>
              </div>
            </template>
          </div>
        </div>

        <div x-show="invoiceHistory.length > 0" class="px-6 py-4 border-t border-gray-200 bg-gray-50">
          <button @click="clearAllHistory()" class="text-sm text-red-600 hover:text-red-700">
            Gesamten Verlauf löschen
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Client Manager Modal -->
  <div x-show="showClientModal" x-cloak class="fixed inset-0 z-50 overflow-y-auto" aria-modal="true">
    <div class="flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:p-0">
      <div x-show="showClientModal" x-transition:enter="ease-out duration-300" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="ease-in duration-200" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity" @click="showClientModal = false"></div>

      <div x-show="showClientModal" x-transition:enter="ease-out duration-300" x-transition:enter-start="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95" x-transition:enter-end="opacity-100 translate-y-0 sm:scale-100" x-transition:leave="ease-in duration-200" x-transition:leave-start="opacity-100 translate-y-0 sm:scale-100" x-transition:leave-end="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95" class="relative bg-white rounded-2xl overflow-hidden shadow-xl transform transition-all sm:max-w-lg sm:w-full max-h-[80vh] flex flex-col">
        <div class="px-6 py-4 border-b border-gray-200 flex justify-between items-center">
          <h2 class="text-xl font-bold text-gray-900">Gespeicherte Kunden</h2>
          <button @click="showClientModal = false" class="text-gray-400 hover:text-gray-600">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
            </svg>
          </button>
        </div>

        <div class="flex-1 overflow-y-auto p-6">
          <div x-show="savedClients.length === 0" class="text-center py-12">
            <svg class="w-16 h-16 mx-auto text-gray-300 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"></path>
            </svg>
            <p class="text-gray-500 mb-2">Noch keine Kunden gespeichert</p>
            <p class="text-sm text-gray-400">Klicken Sie auf "Kunde speichern" nach dem Ausfüllen der Kundendaten</p>
          </div>

          <div x-show="savedClients.length > 0" class="space-y-3">
            <template x-for="client in savedClients" :key="client.id">
              <div class="border border-gray-200 rounded-lg p-4 hover:border-blue-300 transition-colors">
                <div class="flex justify-between items-start">
                  <div class="flex-1 cursor-pointer" @click="loadClientFromManager(client)">
                    <div class="font-semibold text-gray-900" x-text="client.name"></div>
                    <div class="text-sm text-gray-500" x-text="client.email || 'Keine E-Mail'"></div>
                    <div class="text-xs text-gray-400 mt-1" x-text="client.address ? client.address.substring(0, 50) + (client.address.length > 50 ? '...' : '') : 'Keine Adresse'"></div>
                  </div>
                  <div class="flex gap-2 ml-4">
                    <button @click="loadClientFromManager(client)" class="p-2 text-blue-600 hover:bg-blue-50 rounded-lg" title="Diesen Kunden verwenden">
                      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                      </svg>
                    </button>
                    <button @click="deleteClient(client.id)" class="p-2 text-red-600 hover:bg-red-50 rounded-lg" title="Löschen">
                      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                      </svg>
                    </button>
                  </div>
                </div>
              </div>
            </template>
          </div>
        </div>

        <div class="px-6 py-4 border-t border-gray-200 bg-gray-50">
          <p class="text-xs text-gray-500">Tipp: Tippen Sie im Kundennamen-Feld, um gespeicherte Kunden schnell zu finden</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Toast Container -->
  <div id="toast-container" class="fixed bottom-4 right-4 z-50"></div>
</body>
</html>
