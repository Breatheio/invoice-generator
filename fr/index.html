<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Generateur de Factures Gratuit - Creer et Telecharger des Factures PDF | MakeInvoice.online</title>
  <meta name="description" content="Creez des factures professionnelles gratuitement. Generateur de factures simple avec apercu en direct, telechargement PDF et modeles personnalisables. Aucune inscription requise.">
  <meta name="keywords" content="generateur de factures gratuit, creer facture en ligne, modele facture PDF, facture en ligne gratuite, modele de facture">
  <link rel="canonical" href="https://www.makeinvoice.online/fr/">

  <!-- Hreflang tags -->
  <link rel="alternate" hreflang="en" href="https://www.makeinvoice.online/">
  <link rel="alternate" hreflang="de" href="https://www.makeinvoice.online/de/">
  <link rel="alternate" hreflang="fr" href="https://www.makeinvoice.online/fr/">
  <link rel="alternate" hreflang="es" href="https://www.makeinvoice.online/es/">
  <link rel="alternate" hreflang="x-default" href="https://www.makeinvoice.online/">

  <!-- Open Graph / Social -->
  <meta property="og:title" content="Generateur de Factures Gratuit - Creer et Telecharger des Factures PDF">
  <meta property="og:description" content="Creez des factures professionnelles gratuitement. Generateur de factures simple avec apercu en direct et telechargement PDF.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://www.makeinvoice.online/fr/">
  <meta property="og:image" content="https://www.makeinvoice.online/assets/og-image.png">
  <meta property="og:locale" content="fr_FR">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Generateur de Factures Gratuit - MakeInvoice.online">
  <meta name="twitter:description" content="Creez des factures professionnelles gratuitement. Generateur de factures simple avec apercu en direct et telechargement PDF.">

  <!-- JSON-LD Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "MakeInvoice.online",
    "url": "https://www.makeinvoice.online/fr/",
    "description": "Generateur de factures en ligne gratuit avec apercu en direct et telechargement PDF",
    "inLanguage": "fr"
  }
  </script>
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "SoftwareApplication",
    "name": "MakeInvoice.online - Generateur de Factures Gratuit",
    "url": "https://www.makeinvoice.online/fr/",
    "applicationCategory": "BusinessApplication",
    "operatingSystem": "Web Browser",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "EUR"
    },
    "aggregateRating": {
      "@type": "AggregateRating",
      "ratingValue": "4.8",
      "ratingCount": "150"
    },
    "description": "Creez des factures professionnelles gratuitement. Generateur de factures simple avec apercu en direct, telechargement PDF et modeles personnalisables.",
    "inLanguage": "fr"
  }
  </script>
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [
      {
        "@type": "Question",
        "name": "Ce generateur de factures est-il vraiment gratuit ?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Oui ! Notre generateur de factures de base est entierement gratuit. Vous pouvez creer un nombre illimite de factures, ajouter des articles, calculer les taxes et telecharger des PDF. La version gratuite inclut un petit filigrane. Les utilisateurs Premium obtiennent des factures sans filigrane, un logo personnalise, plusieurs devises et plus de modeles."
        }
      },
      {
        "@type": "Question",
        "name": "Dois-je creer un compte ?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Aucune inscription requise. Remplissez simplement le formulaire de facture et telechargez votre PDF instantanement. Vos donnees restent dans votre navigateur et ne sont jamais envoyees a nos serveurs."
        }
      },
      {
        "@type": "Question",
        "name": "Quelles informations une facture doit-elle contenir ?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Une facture professionnelle doit inclure : le nom et les coordonnees de votre entreprise, le nom et l'adresse du client, un numero de facture unique, la date de facture et la date d'echeance, une liste detaillee des produits ou services avec quantites et prix, le sous-total, le montant des taxes (le cas echeant) et le total."
        }
      },
      {
        "@type": "Question",
        "name": "Puis-je ajouter le logo de mon entreprise ?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Oui ! Les utilisateurs Premium peuvent telecharger leur logo d'entreprise pour creer des factures professionnelles personnalisees. Le logo apparait en haut de votre facture et dans le PDF telecharge."
        }
      },
      {
        "@type": "Question",
        "name": "Quelles devises sont prises en charge ?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Les utilisateurs gratuits peuvent creer des factures en USD. Les utilisateurs Premium ont acces a plus de 20 devises, dont EUR, GBP, CHF, CAD, AUD, JPY et bien d'autres."
        }
      },
      {
        "@type": "Question",
        "name": "Mes donnees de facturation sont-elles securisees ?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Oui. Toutes vos donnees de facturation sont stockees localement dans votre navigateur. Vos informations commerciales, donnees clients et contenus de factures ne quittent jamais votre appareil, sauf si vous telechargez ou partagez le PDF."
        }
      }
    ]
  }
  </script>

  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="../assets/logo.svg">

  <!-- Performance: Preconnect to CDN domains -->
  <link rel="preconnect" href="https://cdn.tailwindcss.com">
  <link rel="preconnect" href="https://cdn.jsdelivr.net">
  <link rel="preconnect" href="https://cdnjs.cloudflare.com">

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: {
              50: '#eff6ff',
              100: '#dbeafe',
              200: '#bfdbfe',
              300: '#93c5fd',
              400: '#60a5fa',
              500: '#3b82f6',
              600: '#2563eb',
              700: '#1d4ed8',
              800: '#1e40af',
              900: '#1e3a8a',
            }
          }
        }
      }
    }
  </script>

  <!-- Custom Styles -->
  <link rel="stylesheet" href="../styles/custom.css">

  <!-- Alpine.js + Collapse plugin -->
  <script defer src="https://cdn.jsdelivr.net/npm/@alpinejs/collapse@3.x.x/dist/cdn.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>

  <!-- jsPDF -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <!-- html2canvas -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

  <!-- Paddle.js -->
  <script src="https://cdn.paddle.com/paddle/v2/paddle.js"></script>

  <!-- Google Analytics 4 -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-24Y37R31VJ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-24Y37R31VJ');
  </script>

  <!-- Vercel Analytics -->
  <script defer src="/_vercel/insights/script.js"></script>
  <script defer src="/_vercel/speed-insights/script.js"></script>

  <!-- App Scripts -->
  <script src="../js/currencies.js"></script>
  <script src="../js/storage.js"></script>
  <script src="../js/paddle-handler.js"></script>
  <script src="../js/pdf-generator.js"></script>
  <script src="../js/app.js"></script>
</head>
<body class="bg-gray-50 min-h-screen" x-data="invoiceApp()" x-init="init()">
  <!-- Header -->
  <header class="bg-white shadow-sm border-b border-gray-200">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between items-center h-16">
        <!-- Logo -->
        <div class="flex items-center space-x-3">
          <svg class="w-8 h-8 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
          </svg>
          <span class="text-xl font-bold text-gray-900">MakeInvoice<span class="text-blue-600">.online</span></span>
        </div>

        <!-- Language Switcher & Navigation -->
        <div class="flex items-center space-x-2 sm:space-x-4">
          <div class="relative" x-data="{ open: false }">
            <button @click="open = !open" class="flex items-center text-gray-600 hover:text-blue-600 font-medium text-sm">
              FR
              <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
              </svg>
            </button>
            <div x-show="open" @click.away="open = false" class="absolute right-0 mt-2 w-24 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50">
              <a href="../" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">English</a>
              <a href="../de/" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Deutsch</a>
              <a href="../fr/" class="block px-4 py-2 text-sm text-blue-600 bg-blue-50">Francais</a>
              <a href="../es/" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Espanol</a>
            </div>
          </div>
          <a href="../blog/" class="text-gray-600 hover:text-blue-600 font-medium hidden sm:inline">Blog</a>
          <button @click="newInvoice()" class="btn-secondary text-sm py-2 flex items-center">
            <svg class="w-4 h-4 sm:mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
            </svg>
            <span class="hidden sm:inline">Nouvelle Facture</span>
          </button>
          <button @click="openHistory()" class="btn-secondary text-sm py-2 flex items-center">
            <svg class="w-4 h-4 sm:mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
            <span class="hidden sm:inline">Historique</span>
            <span x-show="invoiceHistory.length > 0" class="ml-1 bg-blue-100 text-blue-600 text-xs px-1.5 py-0.5 rounded-full" x-text="invoiceHistory.length"></span>
          </button>
          <template x-if="isPremium">
            <div class="flex items-center space-x-2">
              <span class="premium-badge">
                <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                  <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>
                </svg>
                Premium
              </span>
              <button @click="cancelSubscription()" class="text-sm text-gray-500 hover:text-gray-700">
                Gerer
              </button>
            </div>
          </template>
          <template x-if="!isPremium">
            <button @click="showPricingModal = true" class="btn-premium text-sm py-2">
              Passer a Premium
            </button>
          </template>
        </div>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <!-- Mobile Tab Switcher -->
    <div class="lg:hidden flex bg-white rounded-lg shadow mb-6 p-1">
      <button
        @click="activeTab = 'form'"
        :class="activeTab === 'form' ? 'bg-blue-600 text-white' : 'text-gray-600'"
        class="flex-1 py-2 px-4 rounded-md font-medium transition-colors"
      >
        Modifier la Facture
      </button>
      <button
        @click="activeTab = 'preview'"
        :class="activeTab === 'preview' ? 'bg-blue-600 text-white' : 'text-gray-600'"
        class="flex-1 py-2 px-4 rounded-md font-medium transition-colors"
      >
        Apercu
      </button>
    </div>

    <div class="grid lg:grid-cols-2 gap-8">
      <!-- Left Column: Form -->
      <div :class="{ 'hidden lg:block': activeTab === 'preview' }">
        <div class="bg-white rounded-xl shadow-lg p-6 space-y-6">
          <!-- Business Info Section -->
          <section>
            <div class="flex justify-between items-center mb-4">
              <h2 class="text-lg font-semibold text-gray-900">Votre Entreprise</h2>
              <div class="flex gap-2">
                <button type="button" @click="saveBusinessInfo()" class="text-xs text-blue-600 hover:text-blue-700 font-medium flex items-center gap-1" title="Enregistrez vos informations d'entreprise pour les futures factures">
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"></path>
                  </svg>
                  Enregistrer le Profil
                </button>
                <span x-show="hasBusinessProfile" class="text-xs text-green-600 flex items-center gap-1">
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                  </svg>
                  Enregistre
                </span>
              </div>
            </div>

            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
              <div class="sm:col-span-2">
                <label class="form-label">Nom de l'Entreprise *</label>
                <input type="text" x-model="business.name" class="form-input" placeholder="Nom de votre entreprise">
              </div>
              <div>
                <label class="form-label">E-mail</label>
                <input type="email" x-model="business.email" class="form-input" placeholder="email@entreprise.fr">
              </div>
              <div>
                <label class="form-label">Telephone</label>
                <input type="tel" x-model="business.phone" class="form-input" placeholder="+33 (0) 1 23 45 67 89">
              </div>
              <div class="sm:col-span-2">
                <label class="form-label">Adresse</label>
                <textarea x-model="business.address" class="form-input" rows="2" placeholder="123 Rue de l'Exemple, 75001 Paris"></textarea>
              </div>

              <!-- Logo Upload (Premium) -->
              <div class="sm:col-span-2">
                <label class="form-label">
                  Logo
                  <span x-show="!isPremium" class="text-purple-600 text-xs ml-1">(Premium)</span>
                </label>
                <div class="logo-upload" :class="{ 'has-logo': business.logo }">
                  <template x-if="business.logo">
                    <div class="relative">
                      <img :src="business.logo" alt="Logo" class="logo-preview">
                      <button @click="removeLogo()" class="absolute top-0 right-0 p-1 bg-red-500 text-white rounded-full text-xs">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                      </button>
                    </div>
                  </template>
                  <template x-if="!business.logo">
                    <label class="cursor-pointer">
                      <svg class="w-10 h-10 mx-auto text-gray-400 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                      </svg>
                      <span class="text-sm text-gray-500">Cliquez pour telecharger (max. 500 Ko)</span>
                      <input type="file" accept="image/*" @change="handleLogoUpload($event)" class="hidden">
                    </label>
                  </template>
                </div>
              </div>
            </div>
          </section>

          <!-- Client Info Section -->
          <section>
            <div class="flex justify-between items-center mb-4">
              <h2 class="text-lg font-semibold text-gray-900">Destinataire</h2>
              <div class="flex gap-2">
                <button type="button" @click="saveCurrentClient()" class="text-xs text-blue-600 hover:text-blue-700 font-medium flex items-center gap-1" title="Enregistrer le client pour une utilisation future">
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"></path>
                  </svg>
                  Enregistrer le Client
                </button>
                <button type="button" @click="openClientManager()" class="text-xs text-gray-500 hover:text-gray-700 font-medium flex items-center gap-1" title="Gerer les clients enregistres">
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"></path>
                  </svg>
                  Gerer
                </button>
              </div>
            </div>
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
              <div class="sm:col-span-2 relative">
                <label class="form-label">Nom du Client *</label>
                <input
                  type="text"
                  x-model="client.name"
                  @input="onClientNameInput($event)"
                  @focus="onClientNameFocus()"
                  @blur="onClientNameBlur()"
                  @keydown="onClientNameKeydown($event)"
                  class="form-input"
                  placeholder="Tapez pour rechercher les clients enregistres..."
                  autocomplete="off"
                >
                <!-- Client Autocomplete Dropdown -->
                <div
                  x-show="showClientSuggestions"
                  x-cloak
                  class="absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto"
                >
                  <template x-for="(suggestion, index) in clientSuggestions" :key="suggestion.id">
                    <button
                      type="button"
                      @click="selectClient(suggestion)"
                      class="w-full px-4 py-3 text-left hover:bg-blue-50 flex items-center justify-between border-b border-gray-100 last:border-b-0 transition-colors"
                      :class="{ 'bg-blue-50': selectedSuggestionIndex === index }"
                    >
                      <div>
                        <div class="font-medium text-gray-900" x-text="suggestion.name"></div>
                        <div class="text-sm text-gray-500" x-text="suggestion.email || 'Pas d\'e-mail'"></div>
                      </div>
                      <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                      </svg>
                    </button>
                  </template>
                </div>
              </div>
              <div>
                <label class="form-label">E-mail du Client</label>
                <input type="email" x-model="client.email" class="form-input" placeholder="client@email.fr">
              </div>
              <div class="sm:col-span-2">
                <label class="form-label">Adresse du Client</label>
                <textarea x-model="client.address" class="form-input" rows="2" placeholder="Adresse du client"></textarea>
              </div>
            </div>
          </section>

          <!-- Invoice Details Section -->
          <section>
            <h2 class="text-lg font-semibold text-gray-900 mb-4">Details de la Facture</h2>
            <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
              <div>
                <label class="form-label">Numero de Facture *</label>
                <input type="text" x-model="invoice.number" class="form-input" placeholder="FAC-001">
              </div>
              <div>
                <label class="form-label">Date de Facture</label>
                <input type="date" x-model="invoice.date" class="form-input">
              </div>
              <div>
                <label class="form-label">Date d'Echeance</label>
                <input type="date" x-model="invoice.dueDate" class="form-input">
              </div>
            </div>
          </section>

          <!-- Currency & Tax Section -->
          <section>
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
              <div>
                <label class="form-label">
                  Devise
                  <span x-show="!isPremium" class="text-purple-600 text-xs ml-1">(Plus avec Premium)</span>
                </label>
                <select x-model="currency" @change="onCurrencyChange()" class="currency-selector">
                  <template x-if="!isPremium">
                    <option value="USD">USD ($) - Dollar US</option>
                  </template>
                  <template x-if="isPremium">
                    <template x-for="curr in CURRENCIES" :key="curr.code">
                      <option :value="curr.code" x-text="`${curr.code} (${curr.symbol}) - ${curr.name}`"></option>
                    </template>
                  </template>
                </select>
              </div>
              <div>
                <label class="form-label">Taux de TVA (%)</label>
                <input type="number" x-model="taxRate" min="0" max="100" step="0.1" class="form-input" placeholder="20">
              </div>
            </div>

            <!-- Discount Section -->
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mt-4">
              <div>
                <label class="form-label">Type de Remise</label>
                <select x-model="discount.type" class="form-input">
                  <option value="percentage">Pourcentage (%)</option>
                  <option value="fixed">Montant Fixe</option>
                </select>
              </div>
              <div>
                <label class="form-label">Remise <span x-text="discount.type === 'percentage' ? '(%)' : '(' + getCurrencySymbol() + ')'"></span></label>
                <input type="number" x-model="discount.value" min="0" step="0.01" class="form-input" placeholder="0">
              </div>
            </div>
          </section>

          <!-- Line Items Section -->
          <section>
            <h2 class="text-lg font-semibold text-gray-900 mb-4">Articles</h2>
            <div class="overflow-x-auto">
              <table class="line-items-table">
                <thead>
                  <tr>
                    <th class="w-1/2">Description</th>
                    <th class="w-20 text-center">Quantite</th>
                    <th class="w-28 text-right">Prix</th>
                    <th class="w-28 text-right">Montant</th>
                    <th class="w-10"></th>
                  </tr>
                </thead>
                <tbody>
                  <template x-for="(item, index) in items" :key="index">
                    <tr>
                      <td class="pr-2">
                        <input type="text" x-model="item.description" class="form-input text-sm" placeholder="Description de l'article">
                      </td>
                      <td class="px-2">
                        <input type="number" x-model="item.quantity" min="1" class="form-input text-sm text-center" placeholder="1">
                      </td>
                      <td class="px-2">
                        <input type="number" x-model="item.price" min="0" step="0.01" class="form-input text-sm text-right" placeholder="0,00">
                      </td>
                      <td class="pl-2 text-right text-gray-700 font-medium" x-text="formatCurrency(item.quantity * item.price)"></td>
                      <td class="pl-2">
                        <button @click="removeItem(index)" class="btn-danger" :disabled="items.length === 1">
                          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                          </svg>
                        </button>
                      </td>
                    </tr>
                  </template>
                </tbody>
              </table>
            </div>
            <button @click="addItem()" class="btn-secondary mt-4 w-full sm:w-auto">
              <svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
              </svg>
              Ajouter un Article
            </button>
          </section>

          <!-- Notes Section -->
          <section>
            <label class="form-label">Notes / Conditions de Paiement</label>
            <textarea x-model="invoice.notes" class="form-input" rows="3" placeholder="Conditions de paiement, coordonnees bancaires, message de remerciement..."></textarea>
          </section>

          <!-- Template Selection (Premium) -->
          <section>
            <h2 class="text-lg font-semibold text-gray-900 mb-4">
              Modele
              <span x-show="!isPremium" class="text-purple-600 text-xs ml-1">(Premium)</span>
            </h2>
            <div class="grid grid-cols-3 gap-4">
              <button @click="onTemplateChange('classic')" :class="{ 'selected': template === 'classic' }" class="template-option">
                <div class="h-16 bg-gray-100 rounded mb-2 flex items-center justify-center">
                  <span class="text-xs text-gray-500">Classique</span>
                </div>
              </button>
              <button @click="onTemplateChange('modern')" :class="{ 'selected': template === 'modern' }" class="template-option relative">
                <div class="h-16 bg-blue-100 rounded mb-2 flex items-center justify-center">
                  <span class="text-xs text-blue-600">Moderne</span>
                </div>
                <span x-show="!isPremium" class="absolute top-1 right-1 text-xs text-purple-600">PRO</span>
              </button>
              <button @click="onTemplateChange('minimal')" :class="{ 'selected': template === 'minimal' }" class="template-option relative">
                <div class="h-16 bg-gray-50 border rounded mb-2 flex items-center justify-center">
                  <span class="text-xs text-gray-500">Minimal</span>
                </div>
                <span x-show="!isPremium" class="absolute top-1 right-1 text-xs text-purple-600">PRO</span>
              </button>
            </div>
          </section>

          <!-- Download & Print Buttons -->
          <div class="pt-4 border-t border-gray-200">
            <div class="flex gap-3">
              <button
                @click="downloadPDF()"
                :disabled="isGeneratingPDF"
                class="btn-primary flex-1 flex items-center justify-center"
              >
                <template x-if="isGeneratingPDF">
                  <span class="flex items-center">
                    <span class="spinner mr-2"></span>
                    Generation en cours...
                  </span>
                </template>
                <template x-if="!isGeneratingPDF">
                  <span class="flex items-center">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path>
                    </svg>
                    Telecharger PDF
                  </span>
                </template>
              </button>
              <button
                @click="printInvoice()"
                class="btn-secondary flex items-center justify-center px-4"
                title="Imprimer la facture"
              >
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"></path>
                </svg>
              </button>
              <button
                @click="saveToHistory()"
                class="btn-secondary flex items-center justify-center px-4"
                title="Enregistrer dans l'historique"
              >
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"></path>
                </svg>
              </button>
            </div>
            <p x-show="!isPremium" class="text-xs text-gray-500 text-center mt-2">
              La version gratuite inclut un filigrane.
              <button @click="showPricingModal = true" class="text-purple-600 hover:underline">Passez a Premium pour des factures sans filigrane</button>
            </p>
          </div>
        </div>

      </div>

      <!-- Right Column: Preview -->
      <div :class="{ 'hidden lg:block': activeTab === 'form' }" class="lg:sticky lg:top-8 lg:self-start">
        <h2 class="text-lg font-semibold text-gray-900 mb-4 hidden lg:block">Apercu en Direct</h2>

        <!-- Invoice Preview -->
        <div id="invoice-preview" class="invoice-preview rounded-lg p-8" :class="getTemplateClass()">
          <!-- Header -->
          <div class="invoice-header" :class="{ 'flex justify-between items-start': template !== 'modern' }">
            <div :class="{ 'text-white': template === 'modern' }">
              <!-- Logo -->
              <template x-if="business.logo">
                <img :src="business.logo" alt="Logo de l'entreprise" class="h-16 object-contain mb-4">
              </template>
              <h1 class="text-2xl font-bold" :class="template === 'modern' ? 'text-white' : 'text-gray-900'" x-text="business.name || 'Nom de votre entreprise'"></h1>
              <p class="text-sm mt-1" :class="template === 'modern' ? 'text-blue-100' : 'text-gray-600'" x-text="business.email"></p>
              <p class="text-sm" :class="template === 'modern' ? 'text-blue-100' : 'text-gray-600'" x-text="business.phone"></p>
              <p class="text-sm whitespace-pre-line" :class="template === 'modern' ? 'text-blue-100' : 'text-gray-600'" x-text="business.address"></p>
            </div>
            <div class="text-right" :class="{ 'mt-4': template === 'modern' }">
              <h2 class="text-3xl font-bold" :class="template === 'modern' ? 'text-white' : 'text-gray-400'">FACTURE</h2>
              <p class="text-sm mt-2" :class="template === 'modern' ? 'text-blue-100' : 'text-gray-600'">
                <span class="font-medium">NÂ°</span> <span x-text="invoice.number || 'FAC-001'"></span>
              </p>
              <p class="text-sm" :class="template === 'modern' ? 'text-blue-100' : 'text-gray-600'">
                <span class="font-medium">Date :</span> <span x-text="invoice.date"></span>
              </p>
              <p class="text-sm" :class="template === 'modern' ? 'text-blue-100' : 'text-gray-600'">
                <span class="font-medium">Echeance :</span> <span x-text="invoice.dueDate"></span>
              </p>
            </div>
          </div>

          <!-- Bill To -->
          <div class="mt-8 mb-8">
            <h3 class="text-sm font-semibold text-gray-500 uppercase tracking-wider mb-2">Facturer a</h3>
            <p class="font-semibold text-gray-900" x-text="client.name || 'Nom du client'"></p>
            <p class="text-sm text-gray-600" x-text="client.email"></p>
            <p class="text-sm text-gray-600 whitespace-pre-line" x-text="client.address"></p>
          </div>

          <!-- Items Table -->
          <table class="w-full mb-8">
            <thead>
              <tr class="border-b-2 border-gray-200">
                <th class="text-left text-sm font-semibold text-gray-600 py-2">Description</th>
                <th class="text-center text-sm font-semibold text-gray-600 py-2 w-20">Qte</th>
                <th class="text-right text-sm font-semibold text-gray-600 py-2 w-28">Prix</th>
                <th class="text-right text-sm font-semibold text-gray-600 py-2 w-28">Montant</th>
              </tr>
            </thead>
            <tbody>
              <template x-for="(item, index) in items" :key="index">
                <tr class="border-b border-gray-100">
                  <td class="py-3 text-gray-800" x-text="item.description || 'Description de l\'article'"></td>
                  <td class="py-3 text-center text-gray-600" x-text="item.quantity"></td>
                  <td class="py-3 text-right text-gray-600" x-text="formatCurrency(item.price)"></td>
                  <td class="py-3 text-right font-medium text-gray-800" x-text="formatCurrency(item.quantity * item.price)"></td>
                </tr>
              </template>
            </tbody>
          </table>

          <!-- Totals -->
          <div class="flex justify-end">
            <div class="w-64">
              <div class="flex justify-between py-2">
                <span class="text-gray-600">Sous-total</span>
                <span class="font-medium text-gray-800" x-text="formatCurrency(subtotal)"></span>
              </div>
              <div class="flex justify-between py-2 text-green-600" x-show="discountAmount > 0">
                <span>Remise <span x-show="discount.type === 'percentage'">(<span x-text="discount.value"></span>%)</span></span>
                <span class="font-medium">-<span x-text="formatCurrency(discountAmount)"></span></span>
              </div>
              <div class="flex justify-between py-2" x-show="taxRate > 0">
                <span class="text-gray-600">TVA (<span x-text="taxRate"></span>%)</span>
                <span class="font-medium text-gray-800" x-text="formatCurrency(taxAmount)"></span>
              </div>
              <div class="flex justify-between py-3 border-t-2 border-gray-800">
                <span class="text-lg font-bold text-gray-900">Total</span>
                <span class="text-lg font-bold text-gray-900" x-text="formatCurrency(total)"></span>
              </div>
            </div>
          </div>

          <!-- Notes -->
          <div x-show="invoice.notes" class="mt-8 pt-6 border-t border-gray-200">
            <h3 class="text-sm font-semibold text-gray-500 uppercase tracking-wider mb-2">Notes</h3>
            <p class="text-sm text-gray-600 whitespace-pre-line" x-text="invoice.notes"></p>
          </div>

          <!-- Watermark (Free users) -->
          <div x-show="!isPremium" class="mt-8 pt-4 text-center">
            <p class="text-xs text-gray-400">Cree avec MakeInvoice.online</p>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- FAQ Section -->
  <section class="bg-gray-50 py-16" x-data="{ openFaq: null }">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12">
        <h2 class="text-3xl font-bold text-gray-900 mb-4">Questions Frequentes</h2>
        <p class="text-gray-600">Tout ce que vous devez savoir sur la creation de factures</p>
      </div>

      <div class="space-y-4">
        <!-- FAQ 1 -->
        <div class="bg-white rounded-lg shadow-sm border border-gray-200">
          <button @click="openFaq = openFaq === 1 ? null : 1" class="w-full px-6 py-4 text-left flex justify-between items-center">
            <span class="font-semibold text-gray-900">Ce generateur de factures est-il vraiment gratuit ?</span>
            <svg class="w-5 h-5 text-gray-500 transition-transform" :class="{ 'rotate-180': openFaq === 1 }" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
            </svg>
          </button>
          <div x-show="openFaq === 1" x-collapse class="px-6 pb-4">
            <p class="text-gray-600">Oui ! Notre generateur de factures de base est entierement gratuit. Vous pouvez creer un nombre illimite de factures, ajouter des articles, calculer les taxes et telecharger des PDF. La version gratuite inclut un petit filigrane. Les utilisateurs Premium obtiennent des factures sans filigrane, un logo personnalise, plusieurs devises et plus de modeles.</p>
          </div>
        </div>

        <!-- FAQ 2 -->
        <div class="bg-white rounded-lg shadow-sm border border-gray-200">
          <button @click="openFaq = openFaq === 2 ? null : 2" class="w-full px-6 py-4 text-left flex justify-between items-center">
            <span class="font-semibold text-gray-900">Dois-je creer un compte ?</span>
            <svg class="w-5 h-5 text-gray-500 transition-transform" :class="{ 'rotate-180': openFaq === 2 }" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
            </svg>
          </button>
          <div x-show="openFaq === 2" x-collapse class="px-6 pb-4">
            <p class="text-gray-600">Aucune inscription requise. Remplissez simplement le formulaire de facture et telechargez votre PDF instantanement. Vos donnees restent dans votre navigateur et ne sont jamais envoyees a nos serveurs.</p>
          </div>
        </div>

        <!-- FAQ 3 -->
        <div class="bg-white rounded-lg shadow-sm border border-gray-200">
          <button @click="openFaq = openFaq === 3 ? null : 3" class="w-full px-6 py-4 text-left flex justify-between items-center">
            <span class="font-semibold text-gray-900">Quelles informations une facture doit-elle contenir ?</span>
            <svg class="w-5 h-5 text-gray-500 transition-transform" :class="{ 'rotate-180': openFaq === 3 }" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
            </svg>
          </button>
          <div x-show="openFaq === 3" x-collapse class="px-6 pb-4">
            <p class="text-gray-600">Une facture professionnelle doit inclure : le nom et les coordonnees de votre entreprise, le nom et l'adresse du client, un numero de facture unique, la date de facture et la date d'echeance, une liste detaillee des produits ou services avec quantites et prix, le sous-total, le montant des taxes (le cas echeant) et le total. Vous pouvez egalement inclure les conditions de paiement et les methodes de paiement acceptees.</p>
          </div>
        </div>

        <!-- FAQ 4 -->
        <div class="bg-white rounded-lg shadow-sm border border-gray-200">
          <button @click="openFaq = openFaq === 4 ? null : 4" class="w-full px-6 py-4 text-left flex justify-between items-center">
            <span class="font-semibold text-gray-900">Puis-je ajouter le logo de mon entreprise ?</span>
            <svg class="w-5 h-5 text-gray-500 transition-transform" :class="{ 'rotate-180': openFaq === 4 }" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
            </svg>
          </button>
          <div x-show="openFaq === 4" x-collapse class="px-6 pb-4">
            <p class="text-gray-600">Oui ! Les utilisateurs Premium peuvent telecharger leur logo d'entreprise pour creer des factures professionnelles personnalisees. Le logo apparait en haut de votre facture et dans le PDF telecharge.</p>
          </div>
        </div>

        <!-- FAQ 5 -->
        <div class="bg-white rounded-lg shadow-sm border border-gray-200">
          <button @click="openFaq = openFaq === 5 ? null : 5" class="w-full px-6 py-4 text-left flex justify-between items-center">
            <span class="font-semibold text-gray-900">Quelles devises sont prises en charge ?</span>
            <svg class="w-5 h-5 text-gray-500 transition-transform" :class="{ 'rotate-180': openFaq === 5 }" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
            </svg>
          </button>
          <div x-show="openFaq === 5" x-collapse class="px-6 pb-4">
            <p class="text-gray-600">Les utilisateurs gratuits peuvent creer des factures en USD. Les utilisateurs Premium ont acces a plus de 20 devises, dont EUR, GBP, CHF, CAD, AUD, JPY et bien d'autres.</p>
          </div>
        </div>

        <!-- FAQ 6 -->
        <div class="bg-white rounded-lg shadow-sm border border-gray-200">
          <button @click="openFaq = openFaq === 6 ? null : 6" class="w-full px-6 py-4 text-left flex justify-between items-center">
            <span class="font-semibold text-gray-900">Mes donnees de facturation sont-elles securisees ?</span>
            <svg class="w-5 h-5 text-gray-500 transition-transform" :class="{ 'rotate-180': openFaq === 6 }" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
            </svg>
          </button>
          <div x-show="openFaq === 6" x-collapse class="px-6 pb-4">
            <p class="text-gray-600">Oui. Toutes vos donnees de facturation sont stockees localement dans votre navigateur. Vos informations commerciales, donnees clients et contenus de factures ne quittent jamais votre appareil, sauf si vous telechargez ou partagez le PDF.</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="bg-white border-t border-gray-200 mt-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        <div>
          <div class="flex items-center space-x-2 mb-4">
            <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
            </svg>
            <span class="font-bold text-gray-900">MakeInvoice.online</span>
          </div>
          <p class="text-sm text-gray-600">Creez des factures professionnelles gratuitement. Generateur de factures simple avec apercu en direct et telechargement PDF.</p>
        </div>
        <div>
          <h3 class="font-semibold text-gray-900 mb-4">Liens Rapides</h3>
          <ul class="space-y-2 text-sm">
            <li><a href="../" class="text-gray-600 hover:text-blue-600">Accueil</a></li>
            <li><a href="../blog/" class="text-gray-600 hover:text-blue-600">Blog</a></li>
            <li><a href="../about" class="text-gray-600 hover:text-blue-600">A Propos</a></li>
            <li><a href="../how-it-works" class="text-gray-600 hover:text-blue-600">Comment ca Marche</a></li>
            <li><a href="../contact" class="text-gray-600 hover:text-blue-600">Contact</a></li>
          </ul>
        </div>
        <div>
          <h3 class="font-semibold text-gray-900 mb-4">Informations Legales</h3>
          <ul class="space-y-2 text-sm">
            <li><a href="#" @click.prevent="showPricingModal = true" class="text-gray-600 hover:text-blue-600">Tarifs</a></li>
            <li><a href="../legal/privacy" class="text-gray-600 hover:text-blue-600">Politique de Confidentialite</a></li>
            <li><a href="../legal/terms" class="text-gray-600 hover:text-blue-600">Conditions d'Utilisation</a></li>
          </ul>
        </div>
      </div>
      <div class="border-t border-gray-200 mt-8 pt-8 text-center text-sm text-gray-500">
        <p>&copy; <span x-text="new Date().getFullYear()"></span> MakeInvoice.online. Tous droits reserves.</p>
      </div>
    </div>
  </footer>

  <!-- Pricing Modal -->
  <div x-show="showPricingModal" x-cloak class="fixed inset-0 z-50 overflow-y-auto" aria-modal="true">
    <div class="flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:p-0">
      <div x-show="showPricingModal" x-transition:enter="ease-out duration-300" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="ease-in duration-200" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity" @click="showPricingModal = false"></div>

      <div x-show="showPricingModal" x-transition:enter="ease-out duration-300" x-transition:enter-start="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95" x-transition:enter-end="opacity-100 translate-y-0 sm:scale-100" x-transition:leave="ease-in duration-200" x-transition:leave-start="opacity-100 translate-y-0 sm:scale-100" x-transition:leave-end="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95" class="relative bg-white rounded-2xl overflow-hidden shadow-xl transform transition-all sm:max-w-3xl sm:w-full">
        <button @click="showPricingModal = false" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600 z-10">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>

        <div class="p-8">
          <h2 class="text-2xl font-bold text-gray-900 text-center mb-2">Passer a Premium</h2>
          <p class="text-gray-600 text-center mb-8">Debloquez toutes les fonctionnalites et creez des factures professionnelles sans filigrane</p>

          <div class="grid md:grid-cols-2 gap-6">
            <!-- Monthly Plan -->
            <div class="pricing-card">
              <h3 class="text-lg font-semibold text-gray-900 mb-2">Mensuel</h3>
              <div class="mb-4">
                <span class="text-4xl font-bold text-gray-900">7 EUR</span>
                <span class="text-gray-500">/mois</span>
              </div>
              <ul class="space-y-3 mb-6 text-sm text-gray-600">
                <li class="flex items-center">
                  <svg class="w-5 h-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                  Sans filigrane
                </li>
                <li class="flex items-center">
                  <svg class="w-5 h-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                  Enregistrer les infos entreprise
                </li>
                <li class="flex items-center">
                  <svg class="w-5 h-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                  Telecharger votre logo
                </li>
                <li class="flex items-center">
                  <svg class="w-5 h-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                  20+ devises
                </li>
                <li class="flex items-center">
                  <svg class="w-5 h-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                  Modeles Premium
                </li>
                <li class="flex items-center">
                  <svg class="w-5 h-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                  Sans publicite
                </li>
              </ul>
              <button @click="openCheckout('monthly')" class="w-full btn-secondary">
                S'abonner Mensuellement
              </button>
            </div>

            <!-- Yearly Plan -->
            <div class="pricing-card recommended">
              <h3 class="text-lg font-semibold text-gray-900 mb-2">Annuel</h3>
              <div class="mb-4">
                <span class="text-4xl font-bold text-gray-900">49 EUR</span>
                <span class="text-gray-500">/an</span>
                <span class="ml-2 inline-block px-2 py-1 bg-green-100 text-green-700 text-xs font-semibold rounded">Economisez 40%</span>
              </div>
              <ul class="space-y-3 mb-6 text-sm text-gray-600">
                <li class="flex items-center">
                  <svg class="w-5 h-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                  Tout du forfait Mensuel
                </li>
                <li class="flex items-center">
                  <svg class="w-5 h-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                  Support prioritaire
                </li>
                <li class="flex items-center">
                  <svg class="w-5 h-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                  Meilleur rapport qualite-prix - Economisez 35 EUR/an
                </li>
              </ul>
              <button @click="openCheckout('yearly')" class="w-full btn-premium">
                S'abonner Annuellement
              </button>
            </div>
          </div>

          <p class="text-xs text-gray-500 text-center mt-6">
            Paiement securise via Paddle. Annulation possible a tout moment.
          </p>
        </div>
      </div>
    </div>
  </div>

  <!-- Success Modal -->
  <div x-show="showSuccessModal" x-cloak class="fixed inset-0 z-50 overflow-y-auto" aria-modal="true">
    <div class="flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:p-0">
      <div x-show="showSuccessModal" x-transition:enter="ease-out duration-300" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="ease-in duration-200" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity" @click="showSuccessModal = false"></div>

      <div x-show="showSuccessModal" x-transition:enter="ease-out duration-300" x-transition:enter-start="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95" x-transition:enter-end="opacity-100 translate-y-0 sm:scale-100" x-transition:leave="ease-in duration-200" x-transition:leave-start="opacity-100 translate-y-0 sm:scale-100" x-transition:leave-end="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95" class="relative bg-white rounded-2xl overflow-hidden shadow-xl transform transition-all sm:max-w-md sm:w-full">
        <button @click="showSuccessModal = false" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600 z-10">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>

        <div class="p-6">
          <div class="mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 mb-4">
            <svg class="h-8 w-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
            </svg>
          </div>

          <h3 class="text-xl font-bold text-gray-900 mb-2">Facture Telechargee !</h3>
          <p class="text-gray-600 mb-6">Votre facture a ete enregistree sur votre appareil.</p>

          <div class="flex gap-3">
            <button @click="showSuccessModal = false; newInvoice()" class="flex-1 btn-secondary">
              Creer une Nouvelle Facture
            </button>
            <button @click="showSuccessModal = false" class="flex-1 btn-primary">
              Termine
            </button>
          </div>

          <p class="text-xs text-gray-500 mt-4">
            <button @click="showSuccessModal = false; showPricingModal = true" class="text-purple-600 hover:underline">Passez a Premium</button>
            pour une experience sans publicite et sans filigrane
          </p>
        </div>
      </div>
    </div>
  </div>

  <!-- History Modal -->
  <div x-show="showHistoryModal" x-cloak class="fixed inset-0 z-50 overflow-y-auto" aria-modal="true">
    <div class="flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:p-0">
      <div x-show="showHistoryModal" x-transition:enter="ease-out duration-300" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="ease-in duration-200" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity" @click="showHistoryModal = false"></div>

      <div x-show="showHistoryModal" x-transition:enter="ease-out duration-300" x-transition:enter-start="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95" x-transition:enter-end="opacity-100 translate-y-0 sm:scale-100" x-transition:leave="ease-in duration-200" x-transition:leave-start="opacity-100 translate-y-0 sm:scale-100" x-transition:leave-end="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95" class="relative bg-white rounded-2xl overflow-hidden shadow-xl transform transition-all sm:max-w-2xl sm:w-full max-h-[80vh] flex flex-col">
        <div class="px-6 py-4 border-b border-gray-200 flex justify-between items-center">
          <h2 class="text-xl font-bold text-gray-900">Historique des Factures</h2>
          <button @click="showHistoryModal = false" class="text-gray-400 hover:text-gray-600">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
            </svg>
          </button>
        </div>

        <div class="flex-1 overflow-y-auto p-6">
          <div x-show="invoiceHistory.length === 0" class="text-center py-12">
            <svg class="w-16 h-16 mx-auto text-gray-300 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
            </svg>
            <p class="text-gray-500 mb-2">Aucune facture enregistree</p>
            <p class="text-sm text-gray-400">Cliquez sur l'icone de signet pour enregistrer une facture ici</p>
          </div>

          <div x-show="invoiceHistory.length > 0" class="space-y-3">
            <template x-for="item in invoiceHistory" :key="item.id">
              <div class="border border-gray-200 rounded-lg p-4 hover:border-blue-300 transition-colors">
                <div class="flex justify-between items-start">
                  <div class="flex-1">
                    <div class="flex items-center gap-2 mb-1">
                      <span class="font-semibold text-gray-900" x-text="item.invoiceNumber"></span>
                      <span class="text-xs text-gray-400" x-text="formatHistoryDate(item.savedAt)"></span>
                    </div>
                    <p class="text-gray-600" x-text="item.clientName"></p>
                    <p class="text-lg font-bold text-gray-900 mt-1" x-text="formatCurrency(item.total)"></p>
                  </div>
                  <div class="flex gap-2">
                    <button @click="duplicateFromHistory(item.id)" class="p-2 text-green-600 hover:bg-green-50 rounded-lg" title="Dupliquer la facture">
                      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                      </svg>
                    </button>
                    <button @click="loadFromHistory(item.id)" class="p-2 text-blue-600 hover:bg-blue-50 rounded-lg" title="Charger la facture">
                      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"></path>
                      </svg>
                    </button>
                    <button @click="deleteFromHistory(item.id)" class="p-2 text-red-600 hover:bg-red-50 rounded-lg" title="Supprimer">
                      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                      </svg>
                    </button>
                  </div>
                </div>
              </div>
            </template>
          </div>
        </div>

        <div x-show="invoiceHistory.length > 0" class="px-6 py-4 border-t border-gray-200 bg-gray-50">
          <button @click="clearAllHistory()" class="text-sm text-red-600 hover:text-red-700">
            Effacer tout l'historique
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Client Manager Modal -->
  <div x-show="showClientModal" x-cloak class="fixed inset-0 z-50 overflow-y-auto" aria-modal="true">
    <div class="flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:p-0">
      <div x-show="showClientModal" x-transition:enter="ease-out duration-300" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="ease-in duration-200" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity" @click="showClientModal = false"></div>

      <div x-show="showClientModal" x-transition:enter="ease-out duration-300" x-transition:enter-start="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95" x-transition:enter-end="opacity-100 translate-y-0 sm:scale-100" x-transition:leave="ease-in duration-200" x-transition:leave-start="opacity-100 translate-y-0 sm:scale-100" x-transition:leave-end="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95" class="relative bg-white rounded-2xl overflow-hidden shadow-xl transform transition-all sm:max-w-lg sm:w-full max-h-[80vh] flex flex-col">
        <div class="px-6 py-4 border-b border-gray-200 flex justify-between items-center">
          <h2 class="text-xl font-bold text-gray-900">Clients Enregistres</h2>
          <button @click="showClientModal = false" class="text-gray-400 hover:text-gray-600">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
            </svg>
          </button>
        </div>

        <div class="flex-1 overflow-y-auto p-6">
          <div x-show="savedClients.length === 0" class="text-center py-12">
            <svg class="w-16 h-16 mx-auto text-gray-300 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"></path>
            </svg>
            <p class="text-gray-500 mb-2">Aucun client enregistre</p>
            <p class="text-sm text-gray-400">Cliquez sur "Enregistrer le Client" apres avoir rempli les informations du client</p>
          </div>

          <div x-show="savedClients.length > 0" class="space-y-3">
            <template x-for="client in savedClients" :key="client.id">
              <div class="border border-gray-200 rounded-lg p-4 hover:border-blue-300 transition-colors">
                <div class="flex justify-between items-start">
                  <div class="flex-1 cursor-pointer" @click="loadClientFromManager(client)">
                    <div class="font-semibold text-gray-900" x-text="client.name"></div>
                    <div class="text-sm text-gray-500" x-text="client.email || 'Pas d\'e-mail'"></div>
                    <div class="text-xs text-gray-400 mt-1" x-text="client.address ? client.address.substring(0, 50) + (client.address.length > 50 ? '...' : '') : 'Pas d\'adresse'"></div>
                  </div>
                  <div class="flex gap-2 ml-4">
                    <button @click="loadClientFromManager(client)" class="p-2 text-blue-600 hover:bg-blue-50 rounded-lg" title="Utiliser ce client">
                      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                      </svg>
                    </button>
                    <button @click="deleteClient(client.id)" class="p-2 text-red-600 hover:bg-red-50 rounded-lg" title="Supprimer">
                      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                      </svg>
                    </button>
                  </div>
                </div>
              </div>
            </template>
          </div>
        </div>

        <div class="px-6 py-4 border-t border-gray-200 bg-gray-50">
          <p class="text-xs text-gray-500">Astuce : Tapez dans le champ du nom du client pour trouver rapidement les clients enregistres</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Toast Container -->
  <div id="toast-container" class="fixed bottom-4 right-4 z-50"></div>
</body>
</html>
